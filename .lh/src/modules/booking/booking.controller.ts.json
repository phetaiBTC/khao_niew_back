{
    "sourceFile": "src/modules/booking/booking.controller.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 30,
            "patches": [
                {
                    "date": 1755932474978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1755937151043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n @Controller('booking')\r\n export class BookingController {\r\n   constructor(private readonly bookingService: BookingService) {}\r\n \r\n-  @Post()\r\n+  @Post('')\r\n   create(@Body() createBookingDto: CreateBookingDto) {\r\n     return this.bookingService.create(createBookingDto);\r\n   }\r\n \r\n"
                },
                {
                    "date": 1755937157127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n @Controller('booking')\r\n export class BookingController {\r\n   constructor(private readonly bookingService: BookingService) {}\r\n \r\n-  @Post('')\r\n+  @Post('/create')\r\n   create(@Body() createBookingDto: CreateBookingDto) {\r\n     return this.bookingService.create(createBookingDto);\r\n   }\r\n \r\n"
                },
                {
                    "date": 1755938616919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n @Controller('booking')\r\n export class BookingController {\r\n   constructor(private readonly bookingService: BookingService) {}\r\n \r\n+  \r\n   @Post('/create')\r\n   create(@Body() createBookingDto: CreateBookingDto) {\r\n     return this.bookingService.create(createBookingDto);\r\n   }\r\n"
                },
                {
                    "date": 1755938623714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,15 @@\n import { Controller, Get, Post, Body, Patch, Param, Delete } from '@nestjs/common';\r\n import { BookingService } from './booking.service';\r\n import { CreateBookingDto } from './dto/create-booking.dto';\r\n import { UpdateBookingDto } from './dto/update-booking.dto';\r\n+import { Public } from 'src/common/decorator/auth.decorator';\r\n \r\n @Controller('booking')\r\n export class BookingController {\r\n   constructor(private readonly bookingService: BookingService) {}\r\n \r\n-  \r\n+  @Public\r\n   @Post('/create')\r\n   create(@Body() createBookingDto: CreateBookingDto) {\r\n     return this.bookingService.create(createBookingDto);\r\n   }\r\n"
                },
                {
                    "date": 1755945907775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n @Controller('booking')\r\n export class BookingController {\r\n   constructor(private readonly bookingService: BookingService) {}\r\n \r\n-  @Public\r\n+  @Public()\r\n   @Post('/create')\r\n   create(@Body() createBookingDto: CreateBookingDto) {\r\n     return this.bookingService.create(createBookingDto);\r\n   }\r\n@@ -19,9 +19,8 @@\n     return this.bookingService.findAll();\r\n   }\r\n \r\n   @Get(':id')\r\n-\r\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n   }\r\n \r\n"
                },
                {
                    "date": 1755948214893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n \r\n   @Get(':id')\r\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n-  }\r\n+  }  \r\n \r\n   @Patch(':id')\r\n   update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n"
                },
                {
                    "date": 1756134448887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,8 +29,8 @@\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n   @Delete(':id')\r\n-  remove(@Param('id') id: string) {\r\n+  delete(@Param('id') id: string) {\r\n     return this.bookingService.remove(+id);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1756135916396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,19 @@\n-import { Controller, Get, Post, Body, Patch, Param, Delete } from '@nestjs/common';\r\n+import { Controller, Get, Post, Body, Patch, Param, Delete, UseGuards } from '@nestjs/common';\r\n import { BookingService } from './booking.service';\r\n import { CreateBookingDto } from './dto/create-booking.dto';\r\n import { UpdateBookingDto } from './dto/update-booking.dto';\r\n-import { Public } from 'src/common/decorator/auth.decorator';\r\n+import { JwtAuthGuard } from 'src/guards/auth.guard';\r\n+import { AuthProfile } from 'src/common/decorator/user.decorator';\r\n \r\n @Controller('booking')\r\n+@UseGuards(JwtAuthGuard)\r\n export class BookingController {\r\n   constructor(private readonly bookingService: BookingService) {}\r\n \r\n-  @Public()\r\n   @Post('/create')\r\n-  create(@Body() createBookingDto: CreateBookingDto) {\r\n-    return this.bookingService.create(createBookingDto);\r\n+  create(@Body() createBookingDto: CreateBookingDto, @AuthProfile('id') userId: string) {\r\n+    return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n   @Get()\r\n   findAll() {\r\n@@ -30,7 +31,7 @@\n   }\r\n \r\n   @Delete(':id')\r\n   delete(@Param('id') id: string) {\r\n-    return this.bookingService.remove(+id);\r\n+    return this.bookingService.delete(+id);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1756137199614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   create(@Body() createBookingDto: CreateBookingDto, @AuthProfile('id') userId: string) {\r\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n-  @Get()\r\n+  @Get( )\r\n   findAll() {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n"
                },
                {
                    "date": 1756137206573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   create(@Body() createBookingDto: CreateBookingDto, @AuthProfile('id') userId: string) {\r\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n-  @Get( )\r\n+  @Get( '/all-bookings')\r\n   findAll() {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n"
                },
                {
                    "date": 1756137216512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   findAll() {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n-  @Get(':id')\r\n+  @Get('/get-booking/:id')\r\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n"
                },
                {
                    "date": 1756137223040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n-  @Patch(':id')\r\n+  @Patch('update:id')\r\n   update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n"
                },
                {
                    "date": 1756137228411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n-  @Patch('update:id')\r\n+  @Patch('update-booking/:id')\r\n   update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n"
                },
                {
                    "date": 1756137234433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n   update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n-  @Delete(':id')\r\n+  @Delete('delete:id')\r\n   delete(@Param('id') id: string) {\r\n     return this.bookingService.delete(+id);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1756228372683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,14 @@\n   update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n-  @Delete('delete:id')\r\n+  @Delete('delete-booking/:id')\r\n   delete(@Param('id') id: string) {\r\n     return this.bookingService.delete(+id);\r\n   }\r\n+\r\n+  @Get('validate-ticket/:ticketCode')\r\n+  async validateTicket(@Param('ticketCode') ticketCode: string) {\r\n+    return this.bookingService.validateQrCode(ticketCode);\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1756273920264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,6 @@\n   delete(@Param('id') id: string) {\r\n     return this.bookingService.delete(+id);\r\n   }\r\n \r\n-  @Get('validate-ticket/:ticketCode')\r\n-  async validateTicket(@Param('ticketCode') ticketCode: string) {\r\n-    return this.bookingService.validateQrCode(ticketCode);\r\n-  }\r\n+\r\n }\r\n"
                },
                {
                    "date": 1756296716965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n   @Get( '/all-bookings')\r\n-  findAll() {\r\n+  findAll( ) {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n"
                },
                {
                    "date": 1756296725343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n   @Get( '/all-bookings')\r\n-  findAll( ) {\r\n+  findAll(search) {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n"
                },
                {
                    "date": 1756296750182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n   @Get( '/all-bookings')\r\n-  findAll(search) {\r\n+  findAll(: string) {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n"
                },
                {
                    "date": 1756296757407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n   @Get( '/all-bookings')\r\n-  findAll(: string) {\r\n+  findAll() {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n"
                },
                {
                    "date": 1756296894591,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     return this.bookingService.create(createBookingDto, userId);\r\n   }\r\n \r\n   @Get( '/all-bookings')\r\n-  findAll() {\r\n+  findAll(@Query() query:PaginateDto) {\r\n     return this.bookingService.findAll();\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n"
                },
                {
                    "date": 1756296901204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,11 @@\n-import { Controller, Get, Post, Body, Patch, Param, Delete, UseGuards } from '@nestjs/common';\r\n+import { Controller, Get, Post, Body, Patch, Param, Delete, UseGuards, Query } from '@nestjs/common';\r\n import { BookingService } from './booking.service';\r\n import { CreateBookingDto } from './dto/create-booking.dto';\r\n import { UpdateBookingDto } from './dto/update-booking.dto';\r\n import { JwtAuthGuard } from 'src/guards/auth.guard';\r\n import { AuthProfile } from 'src/common/decorator/user.decorator';\r\n+import { PaginateDto } from 'src/common/dto/paginate.dto';\r\n \r\n @Controller('booking')\r\n @UseGuards(JwtAuthGuard)\r\n export class BookingController {\r\n"
                },
                {
                    "date": 1756302706129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,12 +17,13 @@\n   }\r\n \r\n   @Get( '/all-bookings')\r\n   findAll(@Query() query:PaginateDto) {\r\n-    return this.bookingService.findAll();\r\n+    return this.bookingService.findAll(query);\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n+\r\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n"
                },
                {
                    "date": 1756302766617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,8 @@\n     return this.bookingService.findAll(query);\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n-\r\n   findOne(@Param('id') id: string) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n@@ -33,9 +32,9 @@\n   }\r\n \r\n   @Delete('delete-booking/:id')\r\n   delete(@Param('id') id: string) {\r\n-    return this.bookingService.delete(+id);\r\n+    return this.bookingService.delete(id);\r\n   }\r\n \r\n \r\n }\r\n"
                },
                {
                    "date": 1756302780220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n   @Delete('delete-booking/:id')\r\n-  delete(@Param('id') id: string) {\r\n+  delete(@Param('id') id: number) {\r\n     return this.bookingService.delete(id);\r\n   }\r\n \r\n \r\n"
                },
                {
                    "date": 1756303193319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n   @Patch('update-booking/:id')\r\n-  update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n+  update(@Param('id') id: num, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n   @Delete('delete-booking/:id')\r\n"
                },
                {
                    "date": 1756303202634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,14 +21,14 @@\n     return this.bookingService.findAll(query);\r\n   }\r\n \r\n   @Get('/get-booking/:id')\r\n-  findOne(@Param('id') id: string) {\r\n+  findOne(@Param('id') id: number) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n   @Patch('update-booking/:id')\r\n-  update(@Param('id') id: num, @Body() updateBookingDto: UpdateBookingDto) {\r\n+  update(@Param('id') id: number, @Body() updateBookingDto: UpdateBookingDto) {\r\n     return this.bookingService.update(+id, updateBookingDto);\r\n   }\r\n \r\n   @Delete('delete-booking/:id')\r\n"
                },
                {
                    "date": 1756303212356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n   }  \r\n \r\n   @Patch('update-booking/:id')\r\n   update(@Param('id') id: number, @Body() updateBookingDto: UpdateBookingDto) {\r\n-    return this.bookingService.update(+id, updateBookingDto);\r\n+    return this.bookingService.update(id, updateBookingDto);\r\n   }\r\n \r\n   @Delete('delete-booking/:id')\r\n   delete(@Param('id') id: number) {\r\n"
                },
                {
                    "date": 1756303423726,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,13 +25,17 @@\n   findOne(@Param('id') id: number) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n-  @Patch('update-booking/:id')\r\n-  update(@Param('id') id: number, @Body() updateBookingDto: UpdateBookingDto) {\r\n-    return this.bookingService.update(id, updateBookingDto);\r\n+@Patch('update-booking/:id')\r\n+async update(@Param('id') id: number, @Body() updateBookingDto: UpdateBookingDto) {\r\n+  try {\r\n+    return await this.bookingService.update(+id, updateBookingDto);\r\n+  } catch (error) {\r\n+    console.error('Update error:', error);\r\n+    throw error;\r\n   }\r\n-\r\n+}\r\n   @Delete('delete-booking/:id')\r\n   delete(@Param('id') id: number) {\r\n     return this.bookingService.delete(id);\r\n   }\r\n"
                },
                {
                    "date": 1756303778476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   findAll(@Query() query:PaginateDto) {\r\n     return this.bookingService.findAll(query);\r\n   }\r\n \r\n-  @Get('/get-booking/:id')\r\n+  @Get('/get-one/:id')\r\n   findOne(@Param('id') id: number) {\r\n     return this.bookingService.findOne(+id);\r\n   }  \r\n \r\n"
                }
            ],
            "date": 1755932474978,
            "name": "Commit-0",
            "content": "import { Controller, Get, Post, Body, Patch, Param, Delete } from '@nestjs/common';\r\nimport { BookingService } from './booking.service';\r\nimport { CreateBookingDto } from './dto/create-booking.dto';\r\nimport { UpdateBookingDto } from './dto/update-booking.dto';\r\n\r\n@Controller('booking')\r\nexport class BookingController {\r\n  constructor(private readonly bookingService: BookingService) {}\r\n\r\n  @Post()\r\n  create(@Body() createBookingDto: CreateBookingDto) {\r\n    return this.bookingService.create(createBookingDto);\r\n  }\r\n\r\n  @Get()\r\n  findAll() {\r\n    return this.bookingService.findAll();\r\n  }\r\n\r\n  @Get(':id')\r\n\r\n  findOne(@Param('id') id: string) {\r\n    return this.bookingService.findOne(+id);\r\n  }\r\n\r\n  @Patch(':id')\r\n  update(@Param('id') id: string, @Body() updateBookingDto: UpdateBookingDto) {\r\n    return this.bookingService.update(+id, updateBookingDto);\r\n  }\r\n\r\n  @Delete(':id')\r\n  remove(@Param('id') id: string) {\r\n    return this.bookingService.remove(+id);\r\n  }\r\n}\r\n"
        }
    ]
}